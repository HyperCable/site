<!DOCTYPE html>
<html lang="en">

<head>
  <title>ga test</title>
  <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-JEX4JP2G1E&l=dataLayer&cx=c&dbg=33"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    var scripts = [
      `gtag('js', new Date());`,

      `gtag('config', 'G-JEX4JP2G1E', { transport_url: 'http://localhost:8000' });`,

      `gtag('set', 'user_properties', {
          favorite_composer: 'Mahler',
          favorite_instrument: 'double bass',
          season_ticketholder: 'true'
        });`,
      `gtag('config', 'G-JEX4JP2G1E', {
          'user_id': 'USER_ID',
          'hello': 'world',
          'coun.try': 'cn',
          transport_url: 'http://localhost:8000'
        });`,

      `gtag('event', 'add_to_cart', {
          currency: 'USD',
          items: [{
            id: "P12345",
            name: "~nmAndroid Warhol T-Shirt~br",
            brand: "Google",
            category: "Apparel/T-Shirts",
            coupon: "SUMMER_DISCOUNT",
            list_name: "Search Results",
            list_position: 1,
            price: 14.99,
            quantity: 2,
            variant: "Black"
          }],
          value: 29.98
        });`,

      `gtag("event", "myevent", {
          value: 29.98,
          coupon: "SUMMER_DISCOUNT",
          currency: "USD",
          i: JSON.stringify([1, 2, 3]),
          j: JSON.stringify({ id: 111, name: 222 }),
          k: 3,
          items: JSON.stringify([
            {
              id: "P12345",
              name: "Android Warhol T-Shirt",
              list_name: "Search Results",
              brand: "Google",
              category: "Apparel/T-Shirts",
              coupon: "SUMMER_DISCOUNT",
              variant: "Black",
              list_position: 1,
              quantity: 2,
              price: 14.99
            }
          ])
        });`,

      `gtag('event', 'add_to_wishlist', {
          currency: 'USD',
          items: [{
            id: "P12345",
            name: "Android Warhol T-Shirt",
            brand: "Google",
            category: "Apparel/T-Shirts",
            coupon: "SUMMER_DISCOUNT",
            list_name: "Search Results",
            list_position: 1,
            price: 14.99,
            quantity: 2,
            variant: "Black"
          }],
          value: 29.98
        });
        `,

      `gtag("event", "begin_checkout", {
          value: 29.98,
          coupon: "SUMMER_DISCOUNT",
          currency: "USD",
          items: [
            {
              id: "P12345",
              name: "Android Warhol T-Shirt",
              list_name: "Search Results",
              brand: "Google",
              category: "Apparel/T-Shirts",
              coupon: "SUMMER_DISCOUNT",
              variant: "Black",
              list_position: 1,
              quantity: 2,
              price: 14.99
            }
          ]
        });
        `,

      `gtag("event", "checkout_progress", {
          coupon: "SUMMER_DISCOUNT",
          currency: "USD",
          checkout_option: "Google Pay",
          checkout_step: 1,
          value: 29.98,
          items: [
            {
              id: "P12345",
              name: "Android Warhol T-Shirt",
              brand: "Google",
              category: "Apparel/T-Shirts",
              coupon: "SUMMER_DISCOUNT",
              list_name: "Search Results",
              list_position: 1,
              price: 14.99,
              quantity: 2,
              variant: "Black"
            }
          ]
        });
        `,

      `gtag('event', 'exception', {
          description: 'Missing required field.',
          fatal: true
        });`,

      `gtag('event', 'generate_lead', {
          currency: 'USD',
          value: 99.99
        });
        `,

      `gtag('event', 'login', {
          non_interaction: true,
          method: 'Google'
        });`,

      `gtag('event', 'page_view', {
          page_location: 'https://example.com/about',
          page_path: '/about',
          page_title: 'About'
        });
        `,

      `gtag("event", "purchase", {
          affiliation: "Google online store",
          coupon: "SUMMER_DISCOUNT",
          currency: "USD",
          shipping: 5.55,
          tax: 3.33,
          transaction_id: "T_1",
          value: 28.86,
          items: [
            {
              id: "P12345",
              name: "Android Warhol T-Shirt",
              coupon: "P12345_coupon",
              list_name: "Search Results",
              brand: "Google",
              category: "Apparel/T-Shirts",
              variant: "Black",
              list_position: 3,
              quantity: 1,
              price: 9.99
            },
            {
              id: "P12346",
              name: "Flame challenge TShirt",
              coupon: "P12346_coupon",
              list_name: "Search Results",
              brand: "MyBrand",
              category: "Apparel/T-Shirts",
              variant: "Red",
              list_position: 5,
              quantity: 1,
              price: 9.99
            }
          ]
        });`,

      `gtag('event', 'refund', {
          coupon: "SUMMER_DISCOUNT",
          currency: "USD",
          shipping: 5.55,
          tax: 3.33,
          transaction_id: "T_12345",
          value: 28.86,
          items: [
            {
              id: "P12345",
              coupon: "P12345_coupon",
              name: "Android Warhol T-Shirt",
              list_name: "Search Results",
              brand: "Google",
              category: "Apparel/T-Shirts",
              variant: "Black",
              list_position: 3,
              quantity: 1,
              price: 9.99
            },
            {
              id: "P12346",
              coupon: "P12346_coupon",
              name: "Flame challenge TShirt",
              list_name: "Search Results",
              brand: "MyBrand",
              category: "Apparel/T-Shirts",
              variant: "Red",
              list_position: 5,
              quantity: 1,
              price: 9.99
            }
          ]
        });`,

      `gtag('event', 'screen_view', {
          screen_name: 'About'
        });`,

      `gtag('event', 'search', {
          search_term: 't-shirts'
        });`,
    ];
    window.addEventListener('load', () => {
      const container = document.getElementById('section');
      scripts.map((item, index) => {
        const card = document.createElement('div');
        card.classList = 'w-xl m-4 p-10 bg-white rounded shadow-xl';
        const el = document.createElement('textarea');
        el.classList = 'autoexpand tracking-wide py-2 px-4 mb-3 leading-relaxed appearance-none block w-full bg-gray-200 border border-gray-200 rounded focus:outline-none focus:bg-white focus:border-gray-500';
        el.id = 'code-' + index;
        el.rows = 5;
        el.value = `${item}`;
        const evalBtn = document.createElement('button');
        evalBtn.classList = 'btn-primary transition duration-300 ease-in-out focus:outline-none focus:shadow-outline bg-purple-700 hover:bg-purple-900 text-white font-normal py-2 px-4 mr-1 rounded';
        evalBtn.onclick = () => {
          console.log(el.value);
          eval(el.value);
        };
        evalBtn.innerText = 'eval';
        card.appendChild(el);
        card.appendChild(evalBtn);
        container.appendChild(card);
      })
    })
  </script>
</head>

<body class="bg-gray-100">
  <h1>GTM transport_url demo</h1>

  <pre>
  <code>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
  </code>
</pre>

  <section id="section">

  </section>


</body>

</html>